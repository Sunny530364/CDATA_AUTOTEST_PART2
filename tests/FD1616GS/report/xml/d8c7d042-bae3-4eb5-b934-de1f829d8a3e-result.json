{"name": "测试mapping-mode为port", "status": "broken", "statusDetails": {"message": "UnboundLocalError: local variable 'port_location' referenced before assignment", "trace": "login = <telnetlib.Telnet object at 0x0000025D147C2630>\n\n    @allure.feature(\"gemport测试\")\n    @allure.story(\"gemport测试\")\n    @allure.title(\"测试mapping-mode为port\")\n    @pytest.mark.run(order=14)\n    def test_gemport_port(login):\n        '''\n        用例描述\n        测试目的： 测试mapping-mode is port, mapping 为port2时，往onu的port1 上下行发送vlan 2000的报文是否都正常\n        测试步骤：\n        步骤1:发现未注册的ONU\n        步骤2:在OLT上通过SN的方式将ONU注册上线\n        步骤3:修改gemport配置为vlan 2000\n        步骤4:配置虚端口vlan2000透传\n        步骤5:打流测试\n        测试方法：上下行各发送两条流：vlan2000 pri2和 vlan2000 pri3\n        结果：上下行都不通\n    \n        '''\n    \n        # tn=login\n        # 修改配置\n        # gemport_port(tn)\n        cdata_info(\"=========mapping_mode为port测试=========\")\n        tn = login\n        Vlan_list = [2000]\n        with allure.step('步骤1:发现未注册的ONU。'):\n            assert autofind_onu(tn, PonID, OnuID, SN)\n        with allure.step('步骤2:在OLT上通过SN的方式将ONU注册上线。'):\n            assert auth_by_sn(tn, PonID, OnuID, Ont_Lineprofile_ID, Ont_Srvprofile_ID, SN)\n        with allure.step(\"步骤3:修改gemport配置为port 2\"):\n            assert gemport_port(tn, ont_lineprofile_id=Ont_Lineprofile_ID)\n        with allure.step(\"步骤4:配置虚端口vlan2000透传\"):\n            assert add_service_port(tn, PonID, OnuID, Gemport_ID, Vlan_list)\n    \n        with allure.step(\"步骤5:打流测试\"):\n            # 清除测试仪的对象，防止影响下个用例的执行\n            time.sleep(5)\n            reset_rom_cmd = ResetROMCommand()\n            reset_rom_cmd.execute()\n    \n            # 发流量测试，onu的Eth1发送vlan2000的报文\n>           port_location = port_location\nE           UnboundLocalError: local variable 'port_location' referenced before assignment\n\ntest_onu_gemport.py:472: UnboundLocalError"}, "description": "\n    用例描述\n    测试目的： 测试mapping-mode is port, mapping 为port2时，往onu的port1 上下行发送vlan 2000的报文是否都正常\n    测试步骤：\n    步骤1:发现未注册的ONU\n    步骤2:在OLT上通过SN的方式将ONU注册上线\n    步骤3:修改gemport配置为vlan 2000\n    步骤4:配置虚端口vlan2000透传\n    步骤5:打流测试\n    测试方法：上下行各发送两条流：vlan2000 pri2和 vlan2000 pri3\n    结果：上下行都不通\n\n    ", "steps": [{"name": "步骤1:发现未注册的ONU。", "status": "passed", "start": 1594275657440, "stop": 1594275658581}, {"name": "步骤2:在OLT上通过SN的方式将ONU注册上线。", "status": "passed", "start": 1594275658581, "stop": 1594275675512}, {"name": "步骤3:修改gemport配置为port 2", "status": "passed", "start": 1594275675512, "stop": 1594275675633}, {"name": "步骤4:配置虚端口vlan2000透传", "status": "passed", "start": 1594275675633, "stop": 1594275677676}, {"name": "步骤5:打流测试", "status": "broken", "statusDetails": {"message": "UnboundLocalError: local variable 'port_location' referenced before assignment\n", "trace": "  File \"E:\\CDATA\\自动化测试\\Cdata_part11\\tests\\GponSfu\\test_onu_gemport.py\", line 472, in test_gemport_port\n    port_location = port_location\n"}, "start": 1594275677676, "stop": 1594275682757}], "attachments": [{"name": "log", "source": "2aa9361a-39bb-42b0-88cf-3f7ea8a7b2af-attachment.txt", "type": "text/plain"}], "start": 1594275657438, "stop": 1594275682757, "uuid": "43b71da5-9130-4f0e-83ef-a7d7166446a1", "historyId": "e4e19f18d220b812d3eaed89b9b8697f", "testCaseId": "01253dee3361663186c9e3b6f028f998", "fullName": "test_onu_gemport#test_gemport_port", "labels": [{"name": "story", "value": "gemport测试"}, {"name": "feature", "value": "gemport测试"}, {"name": "suite", "value": "test_onu_gemport"}, {"name": "host", "value": "DESKTOP-2JV12RE"}, {"name": "thread", "value": "30244-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "test_onu_gemport"}]}